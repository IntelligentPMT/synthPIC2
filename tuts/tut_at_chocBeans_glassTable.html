
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Chocolate Beans in Glass &#8212; synthPIC2 0.5dev documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SEM: More Rendering Modes &amp; Production Scale Use" href="tut_at_spheres_sem.html" />
    <link rel="prev" title="Chocolate Beans on Table" href="tut_at_chocBeans_table.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="chocolate-beans-in-glass">
<h1>Chocolate Beans in Glass<a class="headerlink" href="#chocolate-beans-in-glass" title="Permalink to this headline">¶</a></h1>
<p>In this subsequent tutorial, once again, we will focus on our tasty chocolate beans. We will introduce a further object – a glass with transmissive, refractive material – to the scene, which influences the view on the particles. The perspective of our camera will be subject to variation. Our main focus lies on the difference between the particles’ behavior and appearance on the final images when comparing the scene with and without glass.</p>
<div class="section" id="at-a-glance">
<h2>At a Glance<a class="headerlink" href="#at-a-glance" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="../_images/AAG_01.png"><img alt="../_images/AAG_01.png" src="../_images/AAG_01.png" style="width: 32.5%;" /></a>
<a class="reference internal image-reference" href="../_images/AAG_11.png"><img alt="../_images/AAG_11.png" src="../_images/AAG_11.png" style="width: 32.5%;" /></a>
<a class="reference internal image-reference" href="../_images/AAG_21.png"><img alt="../_images/AAG_21.png" src="../_images/AAG_21.png" style="width: 32.5%;" /></a>
<a class="reference internal image-reference" href="../_images/AAG_3.png"><img alt="../_images/AAG_3.png" src="../_images/AAG_3.png" style="width: 32.5%;" /></a>
<a class="reference internal image-reference" href="../_images/AAG_4.png"><img alt="../_images/AAG_4.png" src="../_images/AAG_4.png" style="width: 32.5%;" /></a>
<a class="reference internal image-reference" href="../_images/AAG_5.png"><img alt="../_images/AAG_5.png" src="../_images/AAG_5.png" style="width: 32.5%;" /></a>
</div>
<div class="section" id="what-we-will-learn">
<h2>What We Will Learn<a class="headerlink" href="#what-we-will-learn" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Closer look at <code class="docutils literal notranslate"><span class="pre">RelaxCollisions</span></code> function, incl. <code class="docutils literal notranslate"><span class="pre">dry_run</span></code></p></li>
<li><p>Enable/disable scene objects</p></li>
<li><p>Slim down recipe with inheritance</p></li>
<li><p>Use multirun to output image series</p></li>
<li><p>Randomize scene by various parameters</p></li>
</ul>
</div>
<div class="section" id="step-1-tidy-up">
<h2>Step 1: Tidy Up!<a class="headerlink" href="#step-1-tidy-up" title="Permalink to this headline">¶</a></h2>
<p>We start this tutorial by using the <code class="docutils literal notranslate"><span class="pre">inheritance</span></code> mechanism a little bit different than before: Our recipe from the previous tutorial grew to a proud size of 303 code lines, all together.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">chocBeans_table.yaml</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initializing and seeding</span>
<span class="nt">defaults</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="nt">initial_runtime_state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="c1"># Defining blueprints</span>
<span class="nt">blueprints</span><span class="p">:</span>
  <span class="nt">measurement_techniques</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
  <span class="nt">particles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="c1"># Physical boundary conditions</span>
<span class="hll"><span class="nt">process_conditions</span><span class="p">:</span>
</span>  <span class="nt">feature_criteria</span><span class="p">:</span>
    <span class="nt">IsCat1</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="l l-Scalar l-Scalar-Plain">⋮</span>
    <span class="nt">IsCat8</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">IsPink</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
  <span class="nt">sets</span><span class="p">:</span>
    <span class="nt">Category1</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="l l-Scalar l-Scalar-Plain">⋮</span>
    <span class="nt">Category8</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">PinkParticles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
  <span class="nt">feature_variabilities</span><span class="p">:</span>
    <span class="nt">CameraNearTable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">InitialParticleLocation</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">ParticleDimension</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">ParticleWidth</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">ParticleHeight</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">PinkColor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">RedColor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">OrangeColor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">YellowColor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">GreenColor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">BlueColor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">PurpleColor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">BrownColor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">RenderingResolutionPercentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">CyclesSamples</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="c1"># Procedural steps of synthetization chain</span>
<span class="hll"><span class="nt">synth_chain</span><span class="p">:</span>
</span>  <span class="nt">feature_generation_steps</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.InvokeBlueprints</span> <span class="c1"># MeasurementTechnique …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.InvokeBlueprints</span> <span class="c1"># Particles …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># cam_location_z …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># location …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># dimensions …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># width …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># height …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># color(pink) …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># color(red) …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># color(orange) …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># color(yellow) …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># color(green) …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># color(blue) …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># color(purple) …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># color(brown) …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RelaxCollisions</span> <span class="c1"># avoid intersections …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RelaxCollisions</span> <span class="c1"># gravity …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># resolution …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span> <span class="c1"># render samples …</span>
  <span class="nt">rendering_steps</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.SaveState …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesTogether</span> <span class="c1"># real …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesTogether</span> <span class="c1"># cat(all) …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesTogether</span> <span class="c1"># cat(pink) …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesIndividually</span> <span class="c1"># pink …</span>
</pre></div>
</div>
</div>
<p>Now – to make navigating and handling the recipe easier and less prone to errors – we want to sort the parts a little bit and shrink down the main recipe to those elements, which are essential and those elements, which we often want to touch.</p>
<p>First, we will create three new files:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">chocBeans_glassTable.yaml</span></code>, our main recipe</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s_SceneVariation.yaml</span></code>, scene description, incl. blueprints</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s_BeanParams.yaml</span></code>, the parameters of our <code class="docutils literal notranslate"><span class="pre">Beads</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s_ColorCategories.yaml</span></code>, sets and color definitions</p></li>
</ul>
<p>As a first step, in our main recipe, we add our usual <code class="docutils literal notranslate"><span class="pre">Initializing</span> <span class="pre">and</span> <span class="pre">seeding</span></code> block. Under <code class="docutils literal notranslate"><span class="pre">defaults:</span></code>, we will now include those three further files (we used the prefix <code class="docutils literal notranslate"><span class="pre">s_</span></code> here to mark the files as “supplementary” = not a stand-alone recipe; this naming convention is arbitrary).</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">chocBeans_glassTable.yaml</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initializing and seeding</span>
<span class="nt">defaults</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">BaseRecipe</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">s_SceneVariation</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">s_BeanParams</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">s_ColorCategories</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_self_</span>
<span class="nt">initial_runtime_state</span><span class="p">:</span>
  <span class="nt">seed</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">42</span>
</pre></div>
</div>
</div>
<p>As mentioned above, we want to keep the parts in the main recipe, which we touch more often and outsource the parts, we rarely or never touch after definition. So, we continue in our main recipe and copy over the two <code class="docutils literal notranslate"><span class="pre">feature_variabilities</span></code> for the features <code class="docutils literal notranslate"><span class="pre">resolution_percentage</span></code> and <code class="docutils literal notranslate"><span class="pre">cycles_samples</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">chocBeans_glassTable.yaml</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initializing and seeding</span>
<span class="nt">defaults</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="nt">initial_runtime_state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="hll"><span class="c1"># Physical boundary conditions</span>
</span><span class="hll"><span class="nt">process_conditions</span><span class="p">:</span>
</span><span class="hll">  <span class="nt">feature_variabilities</span><span class="p">:</span>
</span><span class="hll">    <span class="nt">RenderingResolutionPercentage</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">resolution_percentage</span>
</span><span class="hll">      <span class="nt">variability</span><span class="p">:</span>
</span><span class="hll">        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.Constant</span>
</span><span class="hll">        <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">25</span>
</span><span class="hll">    <span class="nt">CyclesSamples</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cycles_samples</span>
</span><span class="hll">      <span class="nt">variability</span><span class="p">:</span>
</span><span class="hll">        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.Constant</span>
</span><span class="hll">        <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">64</span>
</span></pre></div>
</div>
</div>
<p>We will not need <cite>any</cite> other <code class="docutils literal notranslate"><span class="pre">process_conditions</span></code> in our main recipe. However unfortunately, the <code class="docutils literal notranslate"><span class="pre">synth_chain</span></code> we need to copy over as a whole, since we want to make some changes here. As mentioned earlier, in the current version of <code class="docutils literal notranslate"><span class="pre">synthPIC2</span></code>, it is <cite>not</cite> allowed to change/add only single elements of the both lists <code class="docutils literal notranslate"><span class="pre">feature_generation_steps</span></code> and <code class="docutils literal notranslate"><span class="pre">rendering_steps</span></code> by inheritance, but only to replace them as a whole. In the latter case – in the sequence defined at the very top under <code class="docutils literal notranslate"><span class="pre">defaults:</span></code> – every newly introduced list of <code class="docutils literal notranslate"><span class="pre">feature_generation_steps</span></code> or <code class="docutils literal notranslate"><span class="pre">rendering_steps</span></code> from a subsequent recipe will completely replace its predecessor.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">chocBeans_glassTable.yaml</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Procedural steps of synthetization chain</span>
<span class="nt">synth_chain</span><span class="p">:</span>
  <span class="nt">feature_generation_steps</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.InvokeBlueprints</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniqueBlueprints</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.InvokeBlueprints</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllParticleBlueprints</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CameraNearTable</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniques</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">InitialParticleLocation</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllParticles</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ParticleDimension</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllParticles</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ParticleWidth</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllParticles</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ParticleHeight</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllParticles</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PinkColor</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Category1</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">RedColor</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Category2</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">OrangeColor</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Category3</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">YellowColor</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Category4</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GreenColor</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Category5</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">BlueColor</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Category6</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PurpleColor</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Category7</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">BrownColor</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Category8</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RelaxCollisions</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllParticles</span>
      <span class="nt">num_frames</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
      <span class="nt">time_scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
      <span class="nt">collision_shape</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CONVEX_HULL</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RelaxCollisions</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllParticles</span>
      <span class="nt">use_gravity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
      <span class="nt">damping</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.07</span>
      <span class="nt">friction</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.999</span>
      <span class="nt">restitution</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.001</span>
      <span class="nt">collision_margin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.001</span>
      <span class="nt">num_frames</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">200</span>
      <span class="nt">collision_shape</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CONVEX_HULL</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">RenderingResolutionPercentage</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniques</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CyclesSamples</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniques</span>
  <span class="nt">rendering_steps</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.SaveState</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">state</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesTogether</span>
      <span class="nt">rendering_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">real</span>
      <span class="nt">do_save_features</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesTogether</span>
      <span class="nt">rendering_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">categorical</span>
      <span class="nt">output_file_name_prefix</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">all_</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesTogether</span>
      <span class="nt">rendering_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">categorical</span>
      <span class="nt">set_name_of_interest</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PinkParticles</span>
      <span class="nt">output_file_name_prefix</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pink_</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesIndividually</span>
      <span class="nt">rendering_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">categorical</span>
      <span class="nt">set_name_of_interest</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PinkParticles</span>
      <span class="nt">subfolder</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pink</span>
</pre></div>
</div>
</div>
<p>With the main recipe file <code class="docutils literal notranslate"><span class="pre">chocBeans_glassTable.yaml</span></code> we’re done. Let’s now outsource the rest of our previous recipe file <code class="docutils literal notranslate"><span class="pre">chocBeans_table.yaml</span></code>. In the newly created, supplementary file <code class="docutils literal notranslate"><span class="pre">s_SceneVariation.yaml</span></code>, we add all information about the <code class="docutils literal notranslate"><span class="pre">blueprints</span></code>, the general scene layout as well as the perspective view.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">s_SceneVariation.yaml</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Defining blueprints</span>
<span class="nt">blueprints</span><span class="p">:</span>
  <span class="nt">measurement_techniques</span><span class="p">:</span>
    <span class="nt">TopCamInAir</span><span class="p">:</span>
      <span class="nt">measurement_technique_prototype_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">woodTable_sideCam</span>
      <span class="nt">measurement_volume_material_prototype_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">vacuum</span>
      <span class="nt">background_material_prototype_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">wood</span>
  <span class="nt">particles</span><span class="p">:</span>
    <span class="nt">Bead</span><span class="p">:</span>
      <span class="nt">geometry_prototype_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ellipsoid</span>
      <span class="nt">material_prototype_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">colored_subtle</span>
      <span class="nt">parent</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MeasurementVolume</span>
      <span class="nt">number</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">200</span>
<span class="c1"># Physical boundary conditions</span>
<span class="nt">process_conditions</span><span class="p">:</span>
  <span class="nt">feature_variabilities</span><span class="p">:</span>
    <span class="nt">CameraNearTable</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cam_location_z</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.Constant</span>
        <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-35.0</span>
</pre></div>
</div>
</div>
<p>The second newly created supplementary file <code class="docutils literal notranslate"><span class="pre">s_BeanParams.yaml</span></code> will hold all information, i.e. <code class="docutils literal notranslate"><span class="pre">features</span></code> we want to manipulate, about our particles.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">s_BeanParams.yaml</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Physical boundary conditions</span>
<span class="nt">process_conditions</span><span class="p">:</span>
  <span class="nt">feature_variabilities</span><span class="p">:</span>
    <span class="nt">InitialParticleLocation</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">location</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.UniformlyRandomLocationInMeasurementVolume</span>
    <span class="nt">ParticleDimension</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">dimensions</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.UniformDistribution3dHomogeneous</span>
        <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3.58</span>
        <span class="nt">scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.6</span>
    <span class="nt">ParticleWidth</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">width</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.UniformDistributionNdHomogeneous</span>
        <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.85</span>
        <span class="nt">scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.15</span>
        <span class="nt">num_dimensions</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class="nt">ParticleHeight</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">height</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.UniformDistributionNdHomogeneous</span>
        <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.475</span>
        <span class="nt">scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.15</span>
        <span class="nt">num_dimensions</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
</div>
<p>The last of the three supplementary files <code class="docutils literal notranslate"><span class="pre">s_ColorCategories.yaml</span></code> defines all the <code class="docutils literal notranslate"><span class="pre">feature_criteria</span></code>, the <code class="docutils literal notranslate"><span class="pre">sets</span></code> and the <code class="docutils literal notranslate"><span class="pre">feature_variabilities</span></code>, which are related to color definition.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">s_ColorCategories.yaml</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Physical boundary conditions</span>
<span class="nt">process_conditions</span><span class="p">:</span>
  <span class="nt">feature_criteria</span><span class="p">:</span>
    <span class="nt">IsCat1</span><span class="p">:</span>
      <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.InCompartment</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">location_z</span>
      <span class="nt">compartment_no</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
      <span class="nt">compartments_total</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
      <span class="nt">default_return_value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
    <span class="nt">IsCat2</span><span class="p">:</span>
      <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.InCompartment</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">location_z</span>
      <span class="nt">compartment_no</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
      <span class="nt">compartments_total</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
      <span class="nt">default_return_value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
    <span class="nt">IsCat3</span><span class="p">:</span>
      <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.InCompartment</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">location_z</span>
      <span class="nt">compartment_no</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">3</span>
      <span class="nt">compartments_total</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
      <span class="nt">default_return_value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
    <span class="nt">IsCat4</span><span class="p">:</span>
      <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.InCompartment</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">location_z</span>
      <span class="nt">compartment_no</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4</span>
      <span class="nt">compartments_total</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
      <span class="nt">default_return_value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
    <span class="nt">IsCat5</span><span class="p">:</span>
      <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.InCompartment</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">location_z</span>
      <span class="nt">compartment_no</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
      <span class="nt">compartments_total</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
      <span class="nt">default_return_value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
    <span class="nt">IsCat6</span><span class="p">:</span>
      <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.InCompartment</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">location_z</span>
      <span class="nt">compartment_no</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">6</span>
      <span class="nt">compartments_total</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
      <span class="nt">default_return_value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
    <span class="nt">IsCat7</span><span class="p">:</span>
      <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.InCompartment</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">location_z</span>
      <span class="nt">compartment_no</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">7</span>
      <span class="nt">compartments_total</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
      <span class="nt">default_return_value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
    <span class="nt">IsCat8</span><span class="p">:</span>
      <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.InCompartment</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">location_z</span>
      <span class="nt">compartment_no</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
      <span class="nt">compartments_total</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>
      <span class="nt">default_return_value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
    <span class="nt">IsPink</span><span class="p">:</span>
      <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.InHsvRange</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">color</span>
      <span class="nt">h_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.945</span>
      <span class="nt">h_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.950</span>
      <span class="nt">s_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.895</span>
      <span class="nt">s_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.900</span>
      <span class="nt">v_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.648</span>
      <span class="nt">v_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.653</span>
      <span class="nt">default_return_value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
  <span class="nt">sets</span><span class="p">:</span>
    <span class="nt">Category1</span><span class="p">:</span>
      <span class="nt">criterion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$IsParticle and $IsCat1</span>
    <span class="nt">Category2</span><span class="p">:</span>
      <span class="nt">criterion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$IsParticle and $IsCat2</span>
    <span class="nt">Category3</span><span class="p">:</span>
      <span class="nt">criterion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$IsParticle and $IsCat3</span>
    <span class="nt">Category4</span><span class="p">:</span>
      <span class="nt">criterion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$IsParticle and $IsCat4</span>
    <span class="nt">Category5</span><span class="p">:</span>
      <span class="nt">criterion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$IsParticle and $IsCat5</span>
    <span class="nt">Category6</span><span class="p">:</span>
      <span class="nt">criterion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$IsParticle and $IsCat6</span>
    <span class="nt">Category7</span><span class="p">:</span>
      <span class="nt">criterion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$IsParticle and $IsCat7</span>
    <span class="nt">Category8</span><span class="p">:</span>
      <span class="nt">criterion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$IsParticle and $IsCat8</span>
    <span class="nt">PinkParticles</span><span class="p">:</span>
      <span class="nt">criterion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$IsParticle and $IsPink</span>
  <span class="nt">feature_variabilities</span><span class="p">:</span>
    <span class="nt">PinkColor</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">color</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.RandomHsvColorAsRgb</span>
        <span class="nt">h_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.945</span>
        <span class="nt">h_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.950</span>
        <span class="nt">s_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.895</span>
        <span class="nt">s_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.900</span>
        <span class="nt">v_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.648</span>
        <span class="nt">v_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.653</span>
    <span class="nt">RedColor</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">color</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.RandomHsvColorAsRgb</span>
        <span class="nt">h_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.990</span>
        <span class="nt">h_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.995</span>
        <span class="nt">s_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.995</span>
        <span class="nt">s_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.000</span>
        <span class="nt">v_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.448</span>
        <span class="nt">v_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.453</span>
    <span class="nt">OrangeColor</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">color</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.RandomHsvColorAsRgb</span>
        <span class="nt">h_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.020</span>
        <span class="nt">h_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.025</span>
        <span class="nt">s_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.995</span>
        <span class="nt">s_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1.000</span>
        <span class="nt">v_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.895</span>
        <span class="nt">v_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.900</span>
    <span class="nt">YellowColor</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">color</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.RandomHsvColorAsRgb</span>
        <span class="nt">h_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.087</span>
        <span class="nt">h_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.092</span>
        <span class="nt">s_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.945</span>
        <span class="nt">s_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.950</span>
        <span class="nt">v_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.862</span>
        <span class="nt">v_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.867</span>
    <span class="nt">GreenColor</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">color</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.RandomHsvColorAsRgb</span>
        <span class="nt">h_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.321</span>
        <span class="nt">h_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.326</span>
        <span class="nt">s_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.770</span>
        <span class="nt">s_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.775</span>
        <span class="nt">v_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.253</span>
        <span class="nt">v_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.258</span>
    <span class="nt">BlueColor</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">color</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.RandomHsvColorAsRgb</span>
        <span class="nt">h_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.622</span>
        <span class="nt">h_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.627</span>
        <span class="nt">s_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.846</span>
        <span class="nt">s_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.851</span>
        <span class="nt">v_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.547</span>
        <span class="nt">v_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.552</span>
    <span class="nt">PurpleColor</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">color</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.RandomHsvColorAsRgb</span>
        <span class="nt">h_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.716</span>
        <span class="nt">h_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.721</span>
        <span class="nt">s_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.801</span>
        <span class="nt">s_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.806</span>
        <span class="nt">v_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.348</span>
        <span class="nt">v_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.353</span>
    <span class="nt">BrownColor</span><span class="p">:</span>
      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">color</span>
      <span class="nt">variability</span><span class="p">:</span>
        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$plugins.official.RandomHsvColorAsRgb</span>
        <span class="nt">h_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.020</span>
        <span class="nt">h_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.025</span>
        <span class="nt">s_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.796</span>
        <span class="nt">s_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.801</span>
        <span class="nt">v_min</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.082</span>
        <span class="nt">v_max</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.087</span>
</pre></div>
</div>
</div>
<p>When we render our newly created main recipe, which contains basically “only” a better sorted version of our recent recipe <code class="docutils literal notranslate"><span class="pre">chocBeans_table</span></code>, we will find – surprise, surprise – <cite>exactly</cite> the same output in the folder <code class="docutils literal notranslate"><span class="pre">output/chocBeans_glassTable/&lt;YYYY-MM-DD_hh-mm-ss&gt;/run0/</span></code> and its subfolders, as we produced in the end of the previous tutorial.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">run</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">config</span><span class="o">-</span><span class="nb">dir</span><span class="o">=</span><span class="n">recipes</span> <span class="o">--</span><span class="n">config</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="n">chocBeans_glassTable</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/startPrevRecipe_real.png"><img alt="../_images/startPrevRecipe_real.png" src="../_images/startPrevRecipe_real.png" style="width: 32.5%;" /></a>
<a class="reference internal image-reference" href="../_images/startPrevRecipe_categ_all.png"><img alt="../_images/startPrevRecipe_categ_all.png" src="../_images/startPrevRecipe_categ_all.png" style="width: 32.5%;" /></a>
<a class="reference internal image-reference" href="../_images/startPrevRecipe_categ_pink.png"><img alt="../_images/startPrevRecipe_categ_pink.png" src="../_images/startPrevRecipe_categ_pink.png" style="width: 32.5%;" /></a>
<a class="reference internal image-reference" href="../_images/startPrevRecipe_categ_singlePink_1.png"><img alt="../_images/startPrevRecipe_categ_singlePink_1.png" src="../_images/startPrevRecipe_categ_singlePink_1.png" style="width: 32.5%;" /></a>
<a class="reference internal image-reference" href="../_images/startPrevRecipe_categ_singlePink_2.png"><img alt="../_images/startPrevRecipe_categ_singlePink_2.png" src="../_images/startPrevRecipe_categ_singlePink_2.png" style="width: 32.5%;" /></a>
<a class="reference internal image-reference" href="../_images/startPrevRecipe_categ_singlePink_3.png"><img alt="../_images/startPrevRecipe_categ_singlePink_3.png" src="../_images/startPrevRecipe_categ_singlePink_3.png" style="width: 32.5%;" /></a>
<p>Okay, easy start. Wasn’t it? Just some copy-pasting. In the next step, we will have a look at our main goal in this tutorial. But before we go there, here’s a little overview of the recipe files, which we just created. Take this little summary of the long code blocks’ content from before to recap this first step and to appreciate the possibility to use inheritance for recipes.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">chocBeans_glassTable.yaml</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initializing and seeding</span>
<span class="nt">defaults</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">BaseRecipe</span>
<span class="hll">  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">s_SceneVariation</span>
</span><span class="hll">  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">s_BeanParams</span>
</span><span class="hll">  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">s_ColorCategories</span>
</span>  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">_self_</span>
<span class="nt">initial_runtime_state</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="c1"># Physical boundary conditions</span>
<span class="nt">process_conditions</span><span class="p">:</span>
  <span class="nt">feature_variabilities</span><span class="p">:</span>
    <span class="nt">RenderingResolutionPercentage</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">CyclesSamples</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="c1"># Procedural steps of synthetization chain</span>
<span class="nt">synth_chain</span><span class="p">:</span>
  <span class="nt">feature_generation_steps</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
  <span class="nt">rendering_steps</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">s_SceneVariation.yaml</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Defining blueprints</span>
<span class="nt">blueprints</span><span class="p">:</span>
  <span class="nt">measurement_techniques</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
  <span class="nt">particles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="c1"># Physical boundary conditions</span>
<span class="nt">process_conditions</span><span class="p">:</span>
  <span class="nt">feature_variabilities</span><span class="p">:</span>
    <span class="nt">CameraNearTable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">s_BeanParams.yaml</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Physical boundary conditions</span>
<span class="nt">process_conditions</span><span class="p">:</span>
  <span class="nt">feature_variabilities</span><span class="p">:</span>
    <span class="nt">InitialParticleLocation</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">ParticleDimension</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">ParticleWidth</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">ParticleHeight</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id11">
<div class="code-block-caption"><span class="caption-text">s_ColorCategories.yaml</span><a class="headerlink" href="#id11" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Physical boundary conditions</span>
<span class="nt">process_conditions</span><span class="p">:</span>
  <span class="nt">feature_criteria</span><span class="p">:</span>
    <span class="nt">IsCat1</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="l l-Scalar l-Scalar-Plain">⋮</span>
    <span class="nt">IsCat8</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">IsPink</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
  <span class="nt">sets</span><span class="p">:</span>
    <span class="nt">Category1</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="l l-Scalar l-Scalar-Plain">⋮</span>
    <span class="nt">Category8</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">PinkParticles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
  <span class="nt">feature_variabilities</span><span class="p">:</span>
    <span class="nt">PinkColor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="l l-Scalar l-Scalar-Plain">⋮</span>
    <span class="nt">BrownColor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="step-2-what-to-achieve-and-how-to-approach">
<h2>Step 2: What to Achieve and How to Approach<a class="headerlink" href="#step-2-what-to-achieve-and-how-to-approach" title="Permalink to this headline">¶</a></h2>
<p>As promised, let’s try to envision where we’re going here: We first just took the recipe from the previous tutorial. We sorted it into several helper/supplementary files for the sake of being able to keep the overview and to still be able to handle it.</p>
<p>Next, we want to introduce a further object, namely a <cite>glass</cite>. We place this below our chocolate beans to catch those falling particles during the physics simulation.</p>
<p>Then we will have two cases for our synthesized particles: The first <cite>without</cite>, the second <cite>with</cite> the glass, which was introduced to the scene.</p>
<video controls loop width="100%" poster="../_static/tuts/chocBeans_glassTable/compareGlass_STD_poster.png" src="../_static/tuts/chocBeans_glassTable/compareGlass_STD.mp4"></video><p>We will compare these two and focus on some questions.</p>
<ul class="simple">
<li><p>“How will the particles’ movement differ between the cases with and without glass, starting with exactly the same location of each particle?”</p></li>
<li><p>“How do the particles behave, assuming different physics?”, i.e. different parameters of the <code class="docutils literal notranslate"><span class="pre">RelaxCollisions</span></code> function.</p></li>
<li><p>“How will the particles’ appearance differ with and without glass?”</p></li>
<li><p>“What’s the influence of the gravity?”, i.e. changing the gravity vector</p></li>
<li><p>“How many chocolate beans are good for us?”</p></li>
</ul>
<p>We do this rather detailed investigation of how exactly the particles fall, since this is our last fine-tuning step, before we go into “series production”, i.e. batch processing to output multiple randomized images – all of course from chocolate beans and with every <code class="docutils literal notranslate"><span class="pre">feature</span></code> restricted only to the allowed ranges, which were specified by us.</p>
<p>To actually do something in this step, let’s <cite>at least</cite> prepare the scene for the experiments with parameter variation, which we will perform in the next step. We will first “activate” the glass. To our supplementary file <code class="docutils literal notranslate"><span class="pre">s_SceneVariation.yaml</span></code>, we will add two more <code class="docutils literal notranslate"><span class="pre">feature_variabilities</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">s_SceneVariation.yaml</span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Defining blueprints</span>
<span class="nt">blueprints</span><span class="p">:</span>
  <span class="nt">measurement_techniques</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
  <span class="nt">particles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="c1"># Physical boundary conditions</span>
<span class="nt">process_conditions</span><span class="p">:</span>
  <span class="nt">feature_variabilities</span><span class="p">:</span>
    <span class="nt">CameraNearTable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="hll">    <span class="nt">ShowGlass</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">glass_hide</span>
</span><span class="hll">      <span class="nt">variability</span><span class="p">:</span>
</span><span class="hll">        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.Constant</span>
</span><span class="hll">        <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">False</span>
</span><span class="hll">    <span class="nt">CollisionGlass</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">glass_collision</span>
</span><span class="hll">      <span class="nt">variability</span><span class="p">:</span>
</span><span class="hll">        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.Constant</span>
</span><span class="hll">        <span class="nt">value</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</span></pre></div>
</div>
</div>
<p>In our main recipe <code class="docutils literal notranslate"><span class="pre">chocBeans_glassTable.yaml</span></code>, we add the corresponding <code class="docutils literal notranslate"><span class="pre">feature_generation_steps</span></code>, because our main recipe holds the complete list of <code class="docutils literal notranslate"><span class="pre">feature_generation_steps</span></code>. Let’s add the two <code class="docutils literal notranslate"><span class="pre">TriggerFeatureUpdates</span></code> directly after our two <code class="docutils literal notranslate"><span class="pre">InvokeBlueprints</span></code> steps.</p>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">chocBeans_glassTable.yaml</span><a class="headerlink" href="#id13" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">synth_chain</span><span class="p">:</span>
  <span class="nt">feature_generation_steps</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.InvokeBlueprints …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.InvokeBlueprints …</span>
<span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
</span><span class="hll">      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ShowGlass</span>
</span><span class="hll">      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniques</span>
</span><span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
</span><span class="hll">      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CollisionGlass</span>
</span><span class="hll">      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniques</span>
</span>    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate …</span>
</pre></div>
</div>
</div>
<p>Executing the recipe will output the rendered image showing our chocolate beans captured by the glass.</p>
<img alt="Glass with chocolate beans with offset view" src="../_images/chocBeansGlass_offset.png" />
<p>Okay, the glass is there, but the view isn’t nice. To change this, let’s just remove (or comment out) the corresponding <code class="docutils literal notranslate"><span class="pre">TriggerFeatureUpdate</span></code> step from our list of <code class="docutils literal notranslate"><span class="pre">feature_generation_steps</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">chocBeans_glassTable.yaml</span><a class="headerlink" href="#id14" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">synth_chain</span><span class="p">:</span>
  <span class="nt">feature_generation_steps</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.InvokeBlueprints …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.InvokeBlueprints …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CollisionGlass</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniques</span>
<span class="hll">    <span class="c1"># - _target_: $builtins.TriggerFeatureUpdate</span>
</span><span class="hll">    <span class="c1">#   feature_variability_name: CameraNearTable</span>
</span><span class="hll">    <span class="c1">#   affected_set_name: AllMeasurementTechniques</span>
</span>    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">InitialParticleLocation</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllParticles</span>
</pre></div>
</div>
</div>
<p>If you like, you could also remove the <code class="docutils literal notranslate"><span class="pre">feature</span> <span class="pre">variability</span></code> from our <code class="docutils literal notranslate"><span class="pre">process_conditions</span></code> in the file <code class="docutils literal notranslate"><span class="pre">s_SceneVariation.yaml</span></code>. However, you could also just leave it there. Doesn’t matter, it’s personal preference depending on how keen you are with tidying up (or if you purposefully want to leave those code snippets for later playing around &amp; fast access to change those features once again).</p>
<p>We will change two more things. First, let’s turn on the <code class="docutils literal notranslate"><span class="pre">dry_run</span></code> for our <cite>second</cite> <code class="docutils literal notranslate"><span class="pre">RelaxCollisions</span></code> function again: We want to see how the particles are falling in the next step!</p>
<div class="literal-block-wrapper docutils container" id="id15">
<div class="code-block-caption"><span class="caption-text">chocBeans_glassTable.yaml</span><a class="headerlink" href="#id15" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span>    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RelaxCollisions …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RelaxCollisions</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllParticles</span>
      <span class="nt">use_gravity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
      <span class="nt">damping</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.07</span>
      <span class="nt">friction</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.999</span>
      <span class="nt">restitution</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.001</span>
      <span class="nt">collision_margin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.001</span>
      <span class="nt">num_frames</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">200</span>
      <span class="nt">collision_shape</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CONVEX_HULL</span>
<span class="hll">      <span class="nt">dry_run</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</span></pre></div>
</div>
</div>
<p>Second, we comment out the categorical rendering steps for the moment. We are not interested in those at the moment. But don’t worry, we’ll turn it on again, later in step 4.</p>
<div class="literal-block-wrapper docutils container" id="id16">
<div class="code-block-caption"><span class="caption-text">chocBeans_glassTable.yaml</span><a class="headerlink" href="#id16" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span>  <span class="nt">rendering_steps</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.SaveState …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesTogether</span>
      <span class="nt">rendering_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">real</span>
      <span class="nt">do_save_features</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="hll">    <span class="c1"># - _target_: $builtins.RenderParticlesTogether</span>
</span><span class="hll">    <span class="c1">#   rendering_mode: categorical</span>
</span><span class="hll">    <span class="c1">#   output_file_name_prefix: all_</span>
</span><span class="hll">    <span class="c1"># - _target_: $builtins.RenderParticlesTogether</span>
</span><span class="hll">    <span class="c1">#   rendering_mode: categorical</span>
</span><span class="hll">    <span class="c1">#   set_name_of_interest: PinkParticles</span>
</span><span class="hll">    <span class="c1">#   output_file_name_prefix: pink_</span>
</span><span class="hll">    <span class="c1"># - _target_: $builtins.RenderParticlesIndividually</span>
</span><span class="hll">    <span class="c1">#   rendering_mode: categorical</span>
</span><span class="hll">    <span class="c1">#   set_name_of_interest: PinkParticles</span>
</span><span class="hll">    <span class="c1">#   subfolder: pink</span>
</span></pre></div>
</div>
</div>
<p>If we <cite>would</cite> turn off the particles for a second (just for this one render: comment out the <code class="docutils literal notranslate"><span class="pre">InvokeBlueprints</span></code> of our particles and the <code class="docutils literal notranslate"><span class="pre">TriggerFeatureUpdates</span></code> for color), we’d see our glass on the table – with well positioned camera view. Everything is prepared now for the next step with experiments to investigate parameter variation.</p>
<img alt="Only empty glass in the middle of the camera view" src="../_images/glassOnly.png" />
</div>
<div class="section" id="step-3-playing-god-and-change-the-physics">
<h2>Step 3: Playing God and Change the Physics<a class="headerlink" href="#step-3-playing-god-and-change-the-physics" title="Permalink to this headline">¶</a></h2>
<p>If you commented them out to see only the glass in the last step, comment them in again, the lines for <code class="docutils literal notranslate"><span class="pre">InvokeBlueprints</span></code> of our particles and the <code class="docutils literal notranslate"><span class="pre">TriggerFeatureUpdates</span></code> for color.</p>
<p>Now, you are free to change and play around with some parameters. You could try the following variations (see also subsequent images):</p>
<ul class="simple">
<li><p>Simulate with and without glass (try different combinations of <code class="docutils literal notranslate"><span class="pre">ShowGlass</span></code> and/or <code class="docutils literal notranslate"><span class="pre">CollisionGlass</span></code>).</p></li>
<li><p>Use our previous parameters of <code class="docutils literal notranslate"><span class="pre">RelaxCollisions</span></code>, try changing parameters of <code class="docutils literal notranslate"><span class="pre">RelaxCollisions</span></code>, e.g. play around with <code class="docutils literal notranslate"><span class="pre">damping</span></code>, <code class="docutils literal notranslate"><span class="pre">friction</span></code> and <code class="docutils literal notranslate"><span class="pre">restitution</span></code>. Try new parameters <code class="docutils literal notranslate"><span class="pre">mass</span></code>, <code class="docutils literal notranslate"><span class="pre">gravity</span></code>. (Hints: leave <code class="docutils literal notranslate"><span class="pre">dry_run</span></code> turned on and keep <code class="docutils literal notranslate"><span class="pre">SaveState</span></code> in <code class="docutils literal notranslate"><span class="pre">rendering_steps</span></code> to observe the effect. A smaller value for <code class="docutils literal notranslate"><span class="pre">num_frames</span></code> is advised. When doing large parameter variation experiments, multirun should be used, see next step.)</p></li>
<li><p>Let the particles fall sideways… everything possible! Therefore, you would need to change the <code class="docutils literal notranslate"><span class="pre">gravity</span></code> vector – keep in mind: this should be input as a list.</p></li>
<li><p>You could try more particles &amp; longer (<code class="docutils literal notranslate"><span class="pre">num_frames</span></code>) simulation time.</p></li>
</ul>
<a class="reference internal image-reference" href="../_images/wGlass_wCollision.png"><img alt="../_images/wGlass_wCollision.png" src="../_images/wGlass_wCollision.png" style="width: 24.5%;" /></a>
<a class="reference internal image-reference" href="../_images/AAG_01.png"><img alt="../_images/AAG_01.png" src="../_images/AAG_01.png" style="width: 24.5%;" /></a>
<a class="reference internal image-reference" href="../_images/collisionOnly.png"><img alt="../_images/collisionOnly.png" src="../_images/collisionOnly.png" style="width: 24.5%;" /></a>
<a class="reference internal image-reference" href="../_images/gravitySideways.png"><img alt="../_images/gravitySideways.png" src="../_images/gravitySideways.png" style="width: 24.5%;" /></a>
<p>The example images show the behavior of our chocolate beans, when a glass is present and when there is no glass and the particles can freely distribute on the table. Furthermore, the third image shows how the particle appearance would look like if there would be a physical (<code class="docutils literal notranslate"><span class="pre">CollisionGlass</span></code>), but not a visual (<code class="docutils literal notranslate"><span class="pre">ShowGlass</span></code>) influence of the glass. This case is quite interesting: It demonstrates, how our particles would look like – placed in the same position, but if glass would be invisible. Meaning, if there wouldn’t be the refraction of the glass, which distorts the particles’ appearances and eventually moves/changes the information of each particle (i.e. colored pixels) to different pixel locations in the final image. If your use case would be, e.g. to measure the 2D projected area of those chocolate beans with a certain color in the final image, the influence of how strong the glass distorts this truth could be quantified. The last image shows the result if our particles would fall sideways, with a different <code class="docutils literal notranslate"><span class="pre">gravity</span></code> vector applied, see code snippet below.</p>
<div class="literal-block-wrapper docutils container" id="id17">
<div class="code-block-caption"><span class="caption-text">chocBeans_glassTable.yaml</span><a class="headerlink" href="#id17" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span>    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RelaxCollisions …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RelaxCollisions</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllParticles</span>
      <span class="nt">use_gravity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
      <span class="nt">damping</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.07</span>
      <span class="nt">friction</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.999</span>
      <span class="nt">restitution</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.001</span>
      <span class="nt">collision_margin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.001</span>
<span class="hll">      <span class="nt">gravity</span><span class="p">:</span>
</span><span class="hll">        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">+5</span>
</span><span class="hll">        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">-5</span>
</span><span class="hll">        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
</span>      <span class="nt">num_frames</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">200</span>
      <span class="nt">collision_shape</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CONVEX_HULL</span>
      <span class="nt">dry_run</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
</div>
<p>After some variation of our chocolate beans’ quantity, a number of 500 particles looks quite appropriate, resulting in a completely filled glass and a few particles falling on the wooden table – not too many, just the right amount. Also after tinkering around with the parameters of <code class="docutils literal notranslate"><span class="pre">RelaxCollisions</span></code>, we seem to have found our final parametrization, see video below (extended to <code class="docutils literal notranslate"><span class="pre">num_frames:</span> <span class="pre">600</span></code> as opposed to <code class="docutils literal notranslate"><span class="pre">num_frames:</span> <span class="pre">200</span></code> for our final renders) and subsequent code snippets.</p>
<video controls loop width="100%" poster="../_static/tuts/chocBeans_glassTable/500fA_wm_poster.png" src="../_static/tuts/chocBeans_glassTable/500_fullAni_wm.mp4"></video><div class="literal-block-wrapper docutils container" id="id18">
<div class="code-block-caption"><span class="caption-text">s_SceneVariation.yaml</span><a class="headerlink" href="#id18" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Defining blueprints</span>
<span class="nt">blueprints</span><span class="p">:</span>
  <span class="nt">measurement_techniques</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
  <span class="nt">particles</span><span class="p">:</span>
    <span class="nt">Bead</span><span class="p">:</span>
      <span class="nt">geometry_prototype_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ellipsoid</span>
      <span class="nt">material_prototype_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">colored_subtle</span>
      <span class="nt">parent</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">MeasurementVolume</span>
<span class="hll">      <span class="nt">number</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">500</span>
</span></pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id19">
<div class="code-block-caption"><span class="caption-text">chocBeans_glassTable.yaml</span><a class="headerlink" href="#id19" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RelaxCollisions</span>
  <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllParticles</span>
<span class="hll">  <span class="nt">mass</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0012</span>
</span>  <span class="nt">num_frames</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">5</span>
  <span class="nt">time_scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="hll">  <span class="nt">collision_margin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.001</span>
</span>  <span class="nt">collision_shape</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CONVEX_HULL</span>
<span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RelaxCollisions</span>
  <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllParticles</span>
  <span class="nt">use_gravity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
  <span class="nt">damping</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.07</span>
<span class="hll">  <span class="nt">friction</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.4</span>
</span><span class="hll">  <span class="nt">restitution</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.1</span>
</span><span class="hll">  <span class="nt">mass</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0012</span>
</span>  <span class="nt">collision_margin</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.001</span>
  <span class="nt">num_frames</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">200</span>
  <span class="nt">collision_shape</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CONVEX_HULL</span>
  <span class="nt">dry_run</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="step-4-variation-in-series-production">
<h2>Step 4: Variation in Series Production<a class="headerlink" href="#step-4-variation-in-series-production" title="Permalink to this headline">¶</a></h2>
<p>In this last step of our tutorial, we want to go for the fully automated particle generation under (pseudo-)random parameter variation of the scene. We do so, by just simply varying the <code class="docutils literal notranslate"><span class="pre">initial_runtime_state.seed</span></code>.</p>
<p>But first let’s comment in the categorical <code class="docutils literal notranslate"><span class="pre">render_steps</span></code> again.</p>
<div class="literal-block-wrapper docutils container" id="id20">
<div class="code-block-caption"><span class="caption-text">chocBeans_glassTable.yaml</span><a class="headerlink" href="#id20" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span>  <span class="nt">rendering_steps</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.SaveState …</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesTogether</span>
      <span class="nt">rendering_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">real</span>
      <span class="nt">do_save_features</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesTogether</span>
</span><span class="hll">      <span class="nt">rendering_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">categorical</span>
</span><span class="hll">      <span class="nt">output_file_name_prefix</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">all_</span>
</span><span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesTogether</span>
</span><span class="hll">      <span class="nt">rendering_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">categorical</span>
</span><span class="hll">      <span class="nt">set_name_of_interest</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PinkParticles</span>
</span><span class="hll">      <span class="nt">output_file_name_prefix</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pink_</span>
</span><span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RenderParticlesIndividually</span>
</span><span class="hll">      <span class="nt">rendering_mode</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">categorical</span>
</span><span class="hll">      <span class="nt">set_name_of_interest</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PinkParticles</span>
</span><span class="hll">      <span class="nt">subfolder</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pink</span>
</span></pre></div>
</div>
</div>
<p>Furthermore, we will add several new <code class="docutils literal notranslate"><span class="pre">feature_variabilities</span></code> to our <code class="docutils literal notranslate"><span class="pre">s_SceneVariation.yaml</span></code> file.</p>
<div class="literal-block-wrapper docutils container" id="id21">
<div class="code-block-caption"><span class="caption-text">s_SceneVariation.yaml</span><a class="headerlink" href="#id21" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Defining blueprints</span>
<span class="nt">blueprints</span><span class="p">:</span>
  <span class="nt">measurement_techniques</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
  <span class="nt">particles</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="c1"># Physical boundary conditions</span>
<span class="nt">process_conditions</span><span class="p">:</span>
  <span class="nt">feature_variabilities</span><span class="p">:</span>
    <span class="nt">CameraNearTable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">ShowGlass</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
    <span class="nt">CollisionGlass</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">…</span>
<span class="hll">    <span class="nt">CameraRotation</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cam_rotation</span>
</span><span class="hll">      <span class="nt">variability</span><span class="p">:</span>
</span><span class="hll">        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.UniformDistributionNdHomogeneous</span>
</span><span class="hll">        <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-0.0523598775598299</span>
</span><span class="hll">        <span class="nt">scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.10471975511966</span>
</span><span class="hll">        <span class="nt">num_dimensions</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span class="hll">    <span class="nt">CameraAltitude</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cam_altitude</span>
</span><span class="hll">      <span class="nt">variability</span><span class="p">:</span>
</span><span class="hll">        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.UniformDistributionNdHomogeneous</span>
</span><span class="hll">        <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">-0.15707963267949</span>
</span><span class="hll">        <span class="nt">scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.314159265358979</span>
</span><span class="hll">        <span class="nt">num_dimensions</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span class="hll">    <span class="nt">CameraAzimuth</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cam_azimuth</span>
</span><span class="hll">      <span class="nt">variability</span><span class="p">:</span>
</span><span class="hll">        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.UniformDistributionNdHomogeneous</span>
</span><span class="hll">        <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0</span>
</span><span class="hll">        <span class="nt">scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">6.28318530717959</span>
</span><span class="hll">        <span class="nt">num_dimensions</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span class="hll">    <span class="nt">GlassRotation</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">glass_rotation</span>
</span><span class="hll">      <span class="nt">variability</span><span class="p">:</span>
</span><span class="hll">        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.UniformDistributionNdHomogeneous</span>
</span><span class="hll">        <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0</span>
</span><span class="hll">        <span class="nt">scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.698131700797732</span>
</span><span class="hll">        <span class="nt">num_dimensions</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span class="hll">    <span class="nt">TableRotation</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">table_rotation</span>
</span><span class="hll">      <span class="nt">variability</span><span class="p">:</span>
</span><span class="hll">        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.UniformDistributionNdHomogeneous</span>
</span><span class="hll">        <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0.0</span>
</span><span class="hll">        <span class="nt">scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">6.28318530717959</span>
</span><span class="hll">        <span class="nt">num_dimensions</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span class="hll">    <span class="nt">WoodTexture</span><span class="p">:</span>
</span><span class="hll">      <span class="nt">feature_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">texture_seed</span>
</span><span class="hll">      <span class="nt">variability</span><span class="p">:</span>
</span><span class="hll">        <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.UniformDistributionNdHomogeneous</span>
</span><span class="hll">        <span class="nt">location</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">0</span>
</span><span class="hll">        <span class="nt">scale</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1000</span>
</span><span class="hll">        <span class="nt">num_dimensions</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</span></pre></div>
</div>
</div>
<p>…and we need to trigger those in our main recipe file <code class="docutils literal notranslate"><span class="pre">chocBeans_glassTable.yaml</span></code></p>
<div class="literal-block-wrapper docutils container" id="id22">
<div class="code-block-caption"><span class="caption-text">chocBeans_glassTable.yaml</span><a class="headerlink" href="#id22" title="Permalink to this code">¶</a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">synth_chain</span><span class="p">:</span>
  <span class="nt">feature_generation_steps</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.InvokeBlueprints …</span>
    <span class="l l-Scalar l-Scalar-Plain">⋮</span>
    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">BrownColor</span>
      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Category8</span>
<span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
</span><span class="hll">      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CameraRotation</span>
</span><span class="hll">      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniques</span>
</span><span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
</span><span class="hll">      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CameraAltitude</span>
</span><span class="hll">      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniques</span>
</span><span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
</span><span class="hll">      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">CameraAzimuth</span>
</span><span class="hll">      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniques</span>
</span><span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
</span><span class="hll">      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">GlassRotation</span>
</span><span class="hll">      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniques</span>
</span><span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
</span><span class="hll">      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">TableRotation</span>
</span><span class="hll">      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniques</span>
</span><span class="hll">    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.TriggerFeatureUpdate</span>
</span><span class="hll">      <span class="nt">feature_variability_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">WoodTexture</span>
</span><span class="hll">      <span class="nt">affected_set_name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">AllMeasurementTechniques</span>
</span>    <span class="p p-Indicator">-</span> <span class="nt">_target_</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">$builtins.RelaxCollisions …</span>
    <span class="l l-Scalar l-Scalar-Plain">⋮</span>
</pre></div>
</div>
</div>
<p>These new feature variations will introduce random variations of the camera angle and the rotations of the glass, table and wood texture of the table. As a final measure we increase the <code class="docutils literal notranslate"><span class="pre">RenderingResolutionPercentage</span></code> and the <code class="docutils literal notranslate"><span class="pre">CyclesSamples</span></code> to get a high-resolution image as output.</p>
<p>To call the execution we now execute our recipe as we normally do with the addition of the argument <code class="docutils literal notranslate"><span class="pre">multirun</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">run</span><span class="o">.</span><span class="n">py</span> <span class="o">--</span><span class="n">config</span><span class="o">-</span><span class="nb">dir</span><span class="o">=</span><span class="n">recipes</span> <span class="o">--</span><span class="n">config</span><span class="o">-</span><span class="n">name</span><span class="o">=</span><span class="n">chocBeans_glassTable</span> <span class="o">--</span><span class="n">multirun</span> <span class="n">initial_runtime_state</span><span class="o">.</span><span class="n">seed</span><span class="o">=</span><span class="s2">&quot;range(10)&quot;</span>
</pre></div>
</div>
<p>The number in brackets behind <code class="docutils literal notranslate"><span class="pre">range</span></code> can be set to the desired number of output images. The images below show some example images of our fully automated series production of chocolate beans, whereas all captures are unique and randomized in various parameters.</p>
<a class="reference internal image-reference" href="../_images/multi_seed3_real.png"><img alt="../_images/multi_seed3_real.png" src="../_images/multi_seed3_real.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed9_real.png"><img alt="../_images/multi_seed9_real.png" src="../_images/multi_seed9_real.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed11_real.png"><img alt="../_images/multi_seed11_real.png" src="../_images/multi_seed11_real.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed13_real.png"><img alt="../_images/multi_seed13_real.png" src="../_images/multi_seed13_real.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed19_real.png"><img alt="../_images/multi_seed19_real.png" src="../_images/multi_seed19_real.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed20_real.png"><img alt="../_images/multi_seed20_real.png" src="../_images/multi_seed20_real.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed3_cat.png"><img alt="../_images/multi_seed3_cat.png" src="../_images/multi_seed3_cat.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed9_cat.png"><img alt="../_images/multi_seed9_cat.png" src="../_images/multi_seed9_cat.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed11_cat.png"><img alt="../_images/multi_seed11_cat.png" src="../_images/multi_seed11_cat.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed13_cat.png"><img alt="../_images/multi_seed13_cat.png" src="../_images/multi_seed13_cat.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed19_cat.png"><img alt="../_images/multi_seed19_cat.png" src="../_images/multi_seed19_cat.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed20_cat.png"><img alt="../_images/multi_seed20_cat.png" src="../_images/multi_seed20_cat.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed3_pink.png"><img alt="../_images/multi_seed3_pink.png" src="../_images/multi_seed3_pink.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed9_pink.png"><img alt="../_images/multi_seed9_pink.png" src="../_images/multi_seed9_pink.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed11_pink.png"><img alt="../_images/multi_seed11_pink.png" src="../_images/multi_seed11_pink.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed13_pink.png"><img alt="../_images/multi_seed13_pink.png" src="../_images/multi_seed13_pink.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed19_pink.png"><img alt="../_images/multi_seed19_pink.png" src="../_images/multi_seed19_pink.png" style="width: 16.0%;" /></a>
<a class="reference internal image-reference" href="../_images/multi_seed20_pink.png"><img alt="../_images/multi_seed20_pink.png" src="../_images/multi_seed20_pink.png" style="width: 16.0%;" /></a>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">synthPIC2</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html#basic-start">Basic Start</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../tutorials.html#advanced-topics">Advanced Topics</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../concepts.html">Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev_guides.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../tutorials.html">Tutorials</a><ul>
      <li>Previous: <a href="tut_at_chocBeans_table.html" title="previous chapter">Chocolate Beans on Table</a></li>
      <li>Next: <a href="tut_at_spheres_sem.html" title="next chapter">SEM: More Rendering Modes &amp; Production Scale Use</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2024, Max Frei, Robert Panckow, Felix Febrian, Xuebei Zhu.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/tuts/tut_at_chocBeans_glassTable.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>